
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>旅行プール財布 - 東京旅編</title>
  <style>
    body {
      font-family: "Helvetica Neue", sans-serif;
      background: linear-gradient(to bottom, #fefefe, #e0f7fa);
      color: #333;
      margin: 0;
      padding: 1em;
      background-image: url('https://upload.wikimedia.org/wikipedia/commons/8/85/Tokyo_Tower_and_Skyline.jpg');
      background-size: cover;
      background-attachment: fixed;
      background-repeat: no-repeat;
      background-position: center;
    }
    h1, h2 {
      color: #ff4081;
      text-shadow: 1px 1px 2px white;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 12px;
      padding: 1em;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    .card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin: 1em 0;
      padding: 1em;
    }
    label, input, select, button {
      display: block;
      width: 100%;
      margin-bottom: 0.5em;
    }
    button {
      background: #4A90E2;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 0.7em;
      font-size: 1em;
    }
    .list {
      list-style: none;
      padding: 0;
    }
    .list li {
      padding: 0.5em;
      border-bottom: 1px solid #ddd;
    }
    .flex {
      display: flex;
      justify-content: space-between;
    }
    .summary {
      font-weight: bold;
      margin-top: 1em;
      color: #00796b;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>東京旅プール財布</h1>

    <div class="card">
      <h2>支出を記録</h2>
      <label>項目: <input id="desc" type="text"></label>
      <label>金額: <input id="amount" type="number"></label>
      <label>立替者:
        <select id="payer">
          <option value="">プールから直接</option>
          <option value="玄位">玄位</option>
          <option value="浩史">浩史</option>
          <option value="晶子">晶子</option>
          <option value="献四郎">献四郎</option>
          <option value="真理子">真理子</option>
          <option value="和貴">和貴</option>
          <option value="優貴子">優貴子</option>
        </select>
      </label>
      <button onclick="addExpense()">追加</button>
    </div>

    <div class="card">
      <h2>支出履歴</h2>
      <ul id="expenseList" class="list"></ul>
    </div>

    <div class="card">
      <h2>精算状況</h2>
      <ul id="settlementList" class="list"></ul>
      <div id="poolBalance" class="summary"></div>
    </div>
  </div>

  <script>
    const members = ["玄位", "浩史", "晶子", "献四郎", "真理子", "和貴", "優貴子"];
    const expenses = [];
    const initialPool = 200000;

    function addExpense() {
      const desc = document.getElementById("desc").value;
      const amount = Number(document.getElementById("amount").value);
      const payer = document.getElementById("payer").value;
      if (!desc || !amount) return alert("項目と金額を入力してください");

      expenses.push({ desc, amount, payer, time: new Date().toLocaleString('ja-JP') });
      updateExpenseList();
      updateSettlement();
    }

    function updateExpenseList() {
      const list = document.getElementById("expenseList");
      list.innerHTML = "";
      expenses.forEach(e => {
        const who = e.payer ? `${e.payer}が立替` : "プールから支出";
        list.innerHTML += `<li><div class="flex"><span>${e.desc}</span><span>${e.amount}円 (${who})</span></div><div style='font-size:0.8em;color:#888;'>${e.time}</div></li>`;
      });
    }

    function updateSettlement() {
      const paid = {};
      members.forEach(m => paid[m] = 0);
      let poolSpent = 0;

      expenses.forEach(e => {
        if (e.payer) paid[e.payer] += e.amount;
        else poolSpent += e.amount;
      });

      const list = document.getElementById("settlementList");
      list.innerHTML = "";
      members.forEach(m => {
        if (paid[m] > 0) {
          list.innerHTML += `<li>${m} が立替: ${paid[m]}円</li>`;
        }
      });
      list.innerHTML += `<li>プールからの支出: ${poolSpent}円</li>`;

      const balance = initialPool - poolSpent;
      document.getElementById("poolBalance").textContent = `残りのプール金額: ${balance.toLocaleString()}円`;
    }
  </script>
</body>
</html>
